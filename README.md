# Microvolunteer - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—å–∫–∏—Ö –∑–∞–≤–¥–∞–Ω—å

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∑'—î–¥–Ω–∞–Ω–Ω—è –≤—Ä–∞–∑–ª–∏–≤–∏—Ö –ª—é–¥–µ–π –∑ –≤–æ–ª–æ–Ω—Ç–µ—Ä–∞–º–∏ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å.

## ‚úÖ –°—Ç–∞–Ω –ø—Ä–æ–µ–∫—Ç—É

**–í–ò–ü–†–ê–í–õ–ï–ù–Ü –ü–†–û–ë–õ–ï–ú–ò:**
- ‚úÖ SecurityConfig - –¥–æ–¥–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ endpoint-–∏ 
- ‚úÖ TaskService - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–æ–≥—ñ–∫—É –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É—á–∞—Å–Ω–∏–∫—ñ–≤
- ‚úÖ DTO —Ç–∞ Mappers - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞–∑–≤–∏ –ø–æ–ª—ñ–≤
- ‚úÖ Repository - –∑–∞–º—ñ–Ω–µ–Ω–æ MySQL —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞ PostgreSQL
- ‚úÖ Docker - –æ–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –Ω–∞–∑–≤–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
- ‚úÖ Flyway - –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–æ –≤–µ—Ä—Å—ñ—ó 11.0.1 –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ PostgreSQL 16
- ‚úÖ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ - –≤—Å—ñ version conflicts –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Backend**: Spring Boot 3.4, Java 17, PostgreSQL 16, Flyway 11
- **–ë–µ–∑–ø–µ–∫–∞**: Keycloak 26.0.7, JWT
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: Swagger/OpenAPI 2.7.0
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è**: Docker, Docker Compose
- **–ó–±—ñ—Ä–∫–∞**: Maven
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: JUnit 5, Testcontainers

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ

```bash
# –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ (Windows)
quick-test.bat

# –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ (Linux/Mac)
chmod +x quick-test.sh
./quick-test.sh
```

### –†–æ–∑—Ä–æ–±–∫–∞

1. **–ó–∞–ø—É—Å–∫ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏**
   ```bash
   docker-compose -f docker-compose.dev.yml up -d
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É**
   ```bash
   docker ps
   # –í—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –≤ —Å—Ç–∞—Ç—É—Å—ñ "Up"
   ```

3. **–ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É**
   ```bash
   # Windows
   run-dev.bat
   
   # Linux/Mac
   chmod +x run-dev.sh
   ./run-dev.sh
   ```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω

1. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è**
   ```bash
   cp .env.example .env
   # –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª –∑—ñ —Å–≤–æ—ó–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
   ```

2. **–ó–∞–ø—É—Å–∫ –≤—Å—å–æ–≥–æ —Å—Ç–µ–∫—É**
   ```bash
   docker-compose up -d
   ```

## üåê –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

### –†–æ–∑—Ä–æ–±–∫–∞
- **–î–æ–¥–∞—Ç–æ–∫**: http://localhost:8081
- **Swagger UI**: http://localhost:8081/swagger-ui.html
- **Keycloak Admin**: http://localhost:8082 (admin/admin)
- **PostgreSQL**: localhost:5433 (microvolunteer/password)

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
- **–î–æ–¥–∞—Ç–æ–∫**: http://localhost:8081
- **Swagger UI**: http://localhost:8081/swagger-ui.html
- **Keycloak Admin**: http://localhost:8080
- **PostgreSQL**: localhost:5432

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–æ—é `/swagger-ui.html` –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –¥–æ–¥–∞—Ç–∫—É.

### –û—Å–Ω–æ–≤–Ω—ñ endpoint-–∏

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `POST /api/auth/register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- `POST /api/auth/sync` - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ Keycloak
- `POST /api/auth/token` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è JWT —Ç–æ–∫–µ–Ω–∞ ‚úÖ

#### –ó–∞–≤–¥–∞–Ω–Ω—è
- `GET /api/tasks/list` - –°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å
- `GET /api/tasks/{id}` - –î–µ—Ç–∞–ª—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
- `POST /api/tasks` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è
- `PUT /api/tasks/{id}` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è
- `POST /api/tasks/{id}/join` - –ü—Ä–∏—î–¥–Ω–∞–Ω–Ω—è –¥–æ –∑–∞–≤–¥–∞–Ω–Ω—è ‚úÖ
- `POST /api/tasks/{id}/leave` - –í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ —É—á–∞—Å—Ç—ñ ‚úÖ
- `POST /api/tasks/{id}/complete` - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è

#### –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó
- `GET /api/categories` - –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
- `POST /api/categories` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# Unit —Ç–µ—Å—Ç–∏
./mvnw test

# –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è –±–µ–∑ —Ç–µ—Å—Ç—ñ–≤
./mvnw clean compile -DskipTests

# –ü–æ–≤–Ω–∞ –∑–±—ñ—Ä–∫–∞
./mvnw clean install
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Flyway –¥–ª—è –º—ñ–≥—Ä–∞—Ü—ñ–π. –§–∞–π–ª–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ `src/main/resources/db/migration/`.

### –û—Å–Ω–æ–≤–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ:
- `users` - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- `tasks` - –ó–∞–≤–¥–∞–Ω–Ω—è ‚úÖ
- `categories` - –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó
- `participations` - –£—á–∞—Å—Ç—å —É –∑–∞–≤–¥–∞–Ω–Ω—è—Ö ‚úÖ
- `task_images` - –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ü—Ä–æ—Ñ—ñ–ª—ñ Spring
- `default` - –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞
- `dev` - –†–æ–∑—Ä–æ–±–∫–∞ –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ ‚úÖ
- `docker` - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ ‚úÖ
- `test` - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
–î–∏–≤. `.env.example` –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö.

## üê≥ Docker

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏:
- `microvolunteer-postgres-dev` - PostgreSQL 16
- `microvolunteer-keycloak-dev` - Keycloak 26.0.7  
- `microvolunteer-keycloak-postgres-dev` - –ë–î –¥–ª—è Keycloak
- `microvolunteer-redis-dev` - Redis –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:
- `microvolunteer-springboot` - Spring Boot –¥–æ–¥–∞—Ç–æ–∫ ‚úÖ
- `microvolunteer-postgres` - PostgreSQL
- `microvolunteer-keycloak` - Keycloak
- `microvolunteer-keycloak-postgres` - –ë–î –¥–ª—è Keycloak
- `microvolunteer-redis` - Redis

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
```
src/
‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îú‚îÄ‚îÄ java/com/microvolunteer/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Spring ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/      # REST –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/            # DTO –∫–ª–∞—Å–∏ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entity/         # JPA —Å—É—Ç–Ω–æ—Å—Ç—ñ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enums/          # –ï–Ω—É–º–µ—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exception/      # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mapper/         # MapStruct –º–∞–ø–µ—Ä–∏ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/     # Spring Data —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service/        # –ë—ñ–∑–Ω–µ—Å –ª–æ–≥—ñ–∫–∞ ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îú‚îÄ‚îÄ db/migration/   # Flyway –º—ñ–≥—Ä–∞—Ü—ñ—ó ‚úÖ
‚îÇ       ‚îî‚îÄ‚îÄ application*.yml # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è ‚úÖ
‚îî‚îÄ‚îÄ test/                   # –¢–µ—Å—Ç–∏
```

### –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
1. **TaskService** - –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ `currentVolunteers`
2. **Repository** - PostgreSQL-—Å—É–º—ñ—Å–Ω—ñ SQL –∑–∞–ø–∏—Ç–∏
3. **Security** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è endpoint-—ñ–≤
4. **Docker** - —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –Ω–∞–∑–≤–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
5. **DTO** - –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –Ω–∞–∑–≤–∏ –ø–æ–ª—ñ–≤ (`maxVolunteers`)

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

–î–æ–¥–∞—Ç–æ–∫ –Ω–∞–¥–∞—î Actuator endpoints –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É:
- `/actuator/health` - –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤'—è
- `/actuator/info` - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –¥–æ–¥–∞—Ç–æ–∫
- `/actuator/metrics` - –ú–µ—Ç—Ä–∏–∫–∏

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –Ω–æ—Ç–∞—Ç–∫–∏

1. **Keycloak** –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –∑ admin/admin
2. **PostgreSQL** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ—Ä—Ç 5433 –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
3. **JWT —Ç–æ–∫–µ–Ω–∏** –º–∞—é—Ç—å —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó 24 –≥–æ–¥–∏–Ω–∏
4. **Flyway** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–µ—Ä—Å—ñ—é 11.0.1 –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ PostgreSQL 16

## üöß –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
2. ‚úÖ Spring Boot Application  
3. ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–Ω—è –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤
4. ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
5. ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Keycloak
6. ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Swagger UI
7. ‚úÖ –ó–±—ñ—Ä–∫–∞ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
8. üîÑ **–ù–∞–ø–∏—Å–∞–Ω–Ω—è Unit —Ç–µ—Å—Ç—ñ–≤**
9. üîÑ **–ù–∞–ø–∏—Å–∞–Ω–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö –∞–≤—Ç–æ—Ç–µ—Å—Ç—ñ–≤**

## üí° –ü–æ—Ä–∞–¥–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `quick-test.bat/sh` –¥–ª—è —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤: `docker logs microvolunteer-postgres-dev`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Swagger UI –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
- Keycloak admin panel –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:8082

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License
